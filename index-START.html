<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Simpsons Soundboard</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="title">
      <div data-key="65" id="aKey">
        <kbd
          ><img
            src="https://fontmeme.com/permalink/190304/e3aeba50f5215ad11d6b648c7ef316c3.png"
            alt="simpsons-font"
        /></kbd>
        <span class="sound">Press A to hear the theme tune</span>
      </div>
    </div>
    <div id="homer">
      <div class="keys">
        <div data-key="83" class="key">
          <kbd>S</kbd>
          <span class="sound">Doh!</span>
        </div>
        <div data-key="68" class="key">
          <kbd>D</kbd>
          <span class="sound">Mmm, donuts!</span>
        </div>
        <div data-key="70" class="key">
          <kbd>F</kbd>
          <span class="sound">Woohoo!</span>
        </div>
        <div data-key="71" class="key">
          <kbd>G</kbd>
          <span class="sound">*giggles*</span>
        </div>
      </div>
    </div>
    <div id="bart">
      <div class="keys">
        <div data-key="72" class="key">
          <kbd>H</kbd>
          <span class="sound">Eat my shorts!</span>
        </div>
        <div data-key="74" class="key">
          <kbd>J</kbd>
          <span class="sound">Aye Caramba</span>
        </div>
        <div data-key="75" class="key">
          <kbd>K</kbd>
          <span class="sound">Cool Man!</span>
        </div>
        <div data-key="76" class="key">
          <kbd>L</kbd>
          <span class="sound">I didn't do it!</span>
        </div>
      </div>
    </div>

    <audio data-key="65" src="./The-Simpsons-Theme-Song.mp3"></audio>
    <audio
      data-key="83"
      src="http://www.richmolnar.com/Sounds/Homer%20-%20D'oh!%20(1).wav"
    ></audio>
    <audio
      data-key="68"
      src="http://www.richmolnar.com/Sounds/Homer%20-%20Mmmm,%20donuts%20(1).wav"
    ></audio>
    <audio
      data-key="70"
      src="http://www.richmolnar.com/Sounds/Homer%20-%20Woohoo!%20(1).wav"
    ></audio>
    <audio
      data-key="71"
      src="http://www.richmolnar.com/Sounds/Homer%20-%20Giggles.wav"
    ></audio>
    <audio
      data-key="72"
      src="http://www.richmolnar.com/Sounds/Bart%20-%20Eat%20my%20shorts.wav"
    ></audio>
    <audio
      data-key="74"
      src="http://www.richmolnar.com/Sounds/Bart%20-%20Aye%20Carumba.wav"
    ></audio>
    <audio
      data-key="75"
      src="http://www.richmolnar.com/Sounds/Bart%20-%20Cool%20Man.wav"
    ></audio>
    <audio
      data-key="76"
      src="http://www.richmolnar.com/Sounds/Bart%20-%20I%20didn't%20do%20it.wav"
    ></audio>

    <script>
      let playing = false;

      function playSound(event) {
        let audio = document.querySelector(`audio[data-key="${event.keyCode}"`);
        let key = document.querySelector(`.key[data-key="${event.keyCode}"`);
        if (audio) {
          audio.currentTime = 0;
          audio.play();
          key.classList.add("playing");
        } else {
          return;
        }
      }

      function removeTransition(event) {
        if (event.propertyName !== "transform") {
          return;
        }
        this.classList.remove("playing");
      }

      let keys = document.querySelectorAll(".key");
      keys.forEach(function(key) {
        key.addEventListener("transitionend", removeTransition);
      });

      window.addEventListener("keydown", playSound);
    </script>
  </body>
</html>
